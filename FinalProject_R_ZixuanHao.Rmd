---
title: "CDC Obesity Analysis-from Behavioral Risk Factor Surveillance System(BRFSS)"
author: "Zixuan Hao"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output: html_document

---
# Introduction
This is a brief exploratory analysis of the dataset from **Nutrition, Physical Activity, and Obesity - Behavioral Risk Factor Surveillance System (BRFSS)**provided by the CDC. 
The dataset includes U.S. state-level information on obesity, physical activity, and nutrition collected in 2011.

**Objective:** The goal of this analysis is to perform a simple exploratory analysis of the dataset about the race and obesity rate in Georgia.

```{r setup, include=FALSE}
# hide all the code and warnings
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

Import and examine the dataset.
```{r old analysis , include=FALSE}
library(tidyverse)
library(here)
library(gtsummary)
# Set project root
here::i_am("FinalProject_R_ZixuanHao.Rmd")

# Load data
data_path <- here::here("data", "brfss_obesity.csv")
df <- read_csv(data_path)

#filter and show GA data only
ga_data <- df %>%
  filter(LocationDesc == "Georgia")

# glimpse(ga_data)
```

```{r, set root directory}
here::i_am(
  "FinalProject_R_ZixuanHao.Rmd"
)
```


**Table 1**
Produce a formatted summary table of selected variables.  
This is a table generated from the Georgia state's data. It provides an overview of what the obesity across these ethnicity groups.Table 1 shows that obesity prevalence varies across racial/ethnic groups in Georgia, with some groups reporting higher mean percentages.

```{r ga-obesity-race, table old analysis, include=FALSE}
ga_race <- ga_data %>%
  filter(Class == "Obesity / Weight Status",
         StratificationCategory1 == "Race/Ethnicity")

#ga_race %>% head()

ga_race %>%
  gtsummary::tbl_summary(
    by = Stratification1,
    include = c(Sample_Size, Data_Value, Data_Value_Alt, High_Confidence_Limit, Low_Confidence_Limit),
    statistic = all_continuous() ~ "{mean} ({sd})",
    missing = "no"
  ) %>%
  gtsummary::bold_labels()
```

```{r, import table1}
table_ga <-readRDS(
  here::here("output/table1.rds"))
table_ga
```
**Figure 1**
Visualize a key numeric variable using a well-formatted figure. 
This figure below is telling us what the average obesity level in different races in Georgia state. The bar graph is a good way to present differences in obesity mean between different races. Figure 1 shows that obesity prevalence is higher among Non-Hispanic Black adults compared to other groups, while Asian adults have lower prevalence.
```{r ga-obesity-race figure old analysis, include=FALSE}
#figure
ga_race %>%
  group_by(Stratification1) %>%
  summarise(mean_value = mean(Data_Value, na.rm = TRUE)) %>%
  ggplot(aes(x = Stratification1, y = mean_value, fill = Stratification1)) +
  geom_col() +
  labs(
    title = "Obesity Prevalence in Georgia by Race/Ethnicity (2011)",
    x = "Race/Ethnicity",
    y = "Average Obesity Prevalence (%)"
  ) +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")+
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

```{r, import figure1}
figure_ga_obesity_ <-readRDS(
  here::here("output/figure1.rds")
)
print(figure_ga_obesity_)
```
